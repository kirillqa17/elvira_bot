import telebot
from telebot import types
import os
import threading
from dotenv import load_dotenv
load_dotenv()

TOKEN = str(os.getenv("BOT_TOKEN"))

bot = telebot.TeleBot(TOKEN)

# –•—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_data = {}


@bot.message_handler(commands=['start'])
def send_welcome(message):
    video_path = 'media/video.mp4'  # –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –≤–∏–¥–µ–æ

    with open(video_path, 'rb') as video_note:
        bot.send_video_note(message.chat.id, video_note)

    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    markup.add(types.KeyboardButton("–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç ‚ù§Ô∏è"))

    # –ó–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∏–º–µ–Ω–µ–º
    name = message.from_user.first_name
    greeting_text = f"""–ü—Ä–∏–≤–µ—Ç, {name}! üëãüèª –û—á–µ–Ω—å —Ä–∞–¥–∞ –≤–∏–¥–µ—Ç—å —Ç–µ–±—è –∑–¥–µ—Å—å!

–ó–¥–µ—Å—å –≤—Å—ë –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –ø—Ä–æ—Å—Ç–æ, —É–¥–æ–±–Ω–æ –∏ —Å –∑–∞–±–æ—Ç–æ–π –æ —Ç–µ–±–µ.

<b>–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –º—è–≥–∫–æ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ —Ç–≤–æ–∏–º —Ü–µ–ª—è–º, –∫–∞–∫–∏–µ –±—ã –æ–Ω–∏ –Ω–∏ –±—ã–ª–∏</b>:
üå∏ —Å–Ω—è—Ç—å –æ—Ç—ë–∫–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –æ—â—É—â–µ–Ω–∏–µ –ª—ë–≥–∫–æ—Å—Ç–∏
üå∏ –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞ 15 –ª–µ—Ç –º–æ–ª–æ–∂–µ –±–µ–∑ –±–æ—Ç–æ–∫—Å–∞ –∏ —Ö–∏—Ä—É—Ä–≥–∏–∏
üå∏ –ø–æ–¥—Ç—è–Ω—É—Ç—å –∂–∏–≤–æ—Ç –∏ –≤—Å–µ —Ç–µ–ª–æ
üå∏ —É–∫—Ä–µ–ø–∏—Ç—å –º—ã—à—Ü—ã —Ç–∞–∑–æ–≤–æ–≥–æ –¥–Ω–∞
üå∏ –ø–æ–¥—Ç—è–Ω—É—Ç—å –æ–≤–∞–ª –ª–∏—Ü–∞ –∏ —É–±—Ä–∞—Ç—å –≤—Ç–æ—Ä–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫
üå∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏

<b>–î–∞–≤–∞–π –æ–ø—Ä–µ–¥–µ–ª–∏–º, –∫–∞–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω—É–∂–Ω–∞ —Ç–≤–æ–µ–º—É —Ç–µ–ª—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?</b>"""

    bot.send_message(message.chat.id, greeting_text, reply_markup=markup, parse_mode='HTML')


@bot.message_handler(func=lambda message: message.text == "–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç ‚ù§Ô∏è")
def start_test(message):
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∏–º–µ–Ω–µ–º
    ask_age(message.chat.id)

def ask_age(chat_id):
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    markup.add('–î–æ 30', '30-40', '40-50', '50+')
    bot.send_message(chat_id, "1/4 –°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text in ['–î–æ 30', '30-40', '40-50', '50+'])
def handle_age(message):
    user_data[message.chat.id] = {'age': message.text}
    ask_motivation(message.chat.id)


def ask_motivation(chat_id):
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    markup.add('–î–∞, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ', '–î–∞–∂–µ –Ω–µ –Ω–∞—á–∏–Ω–∞—é, –≤–µ—á–Ω–æ —á—Ç–æ-—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç')
    bot.send_message(chat_id,
                     "2/4 –ë—ã–≤–∞–µ—Ç –ª–∏ —É —Ç–µ–±—è —Ç–∞–∫–æ–µ, —á—Ç–æ —Ç—ã –æ–±–µ—â–∞–µ—à—å —Å–µ–±–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–µ–ª–æ–º –∏ –≤–Ω–µ—à–Ω–∏–º –≤–∏–¥–æ–º ¬´—Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞¬ª, –Ω–æ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ —Ö–≤–∞—Ç–∞–µ—Ç –Ω–µ–Ω–∞–¥–æ–ª–≥–æ?",
                     reply_markup=markup)


@bot.message_handler(
    func=lambda message: message.text in ['–î–∞, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ', '–î–∞–∂–µ –Ω–µ –Ω–∞—á–∏–Ω–∞—é, –≤–µ—á–Ω–æ —á—Ç–æ-—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç'])
def handle_motivation(message):
    user_data[message.chat.id]['motivation'] = message.text
    ask_concern(message.chat.id)


def ask_concern(chat_id):
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    markup.add('–°—É—Ç—É–ª–æ—Å—Ç—å, –Ω–µ–∫—Ä–∞—Å–∏–≤–∞—è –æ—Å–∞–Ω–∫–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±–æ–ª–∏—Ç —Å–ø–∏–Ω–∞', '–í—Ç–æ—Ä–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫, –±—Ä—ã–ª–∏')
    bot.send_message(chat_id, "3/4 –ß—Ç–æ —Ç–µ–±—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤–æ–ª–Ω—É–µ—Ç?", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text in ['–°—É—Ç—É–ª–æ—Å—Ç—å, –Ω–µ–∫—Ä–∞—Å–∏–≤–∞—è –æ—Å–∞–Ω–∫–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±–æ–ª–∏—Ç —Å–ø–∏–Ω–∞',
                                                           '–í—Ç–æ—Ä–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫, –±—Ä—ã–ª–∏'])
def handle_concern(message):
    user_data[message.chat.id]['concern'] = message.text
    ask_time(message.chat.id)


def ask_time(chat_id):
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    markup.add('10-15 –º–∏–Ω—É—Ç', '15-30 –º–∏–Ω—É—Ç')
    bot.send_message(chat_id, "4/4 –°–∫–æ–ª—å–∫–æ —É —Ç–µ–±—è –µ—Å—Ç—å –≤ –¥–µ–Ω—å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–µ–±—è?", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text in ['10-15 –º–∏–Ω—É—Ç', '15-30 –º–∏–Ω—É—Ç'])
def handle_time(message):
    user_data[message.chat.id]['time'] = message.text

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
    thanks_text = """–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–¥–µ–ª–∏–ª–∞—Å—å.. –ù–µ –ø–æ–≤–µ—Ä–∏—à—å, —á—Ç–æ —è —Ç–æ–∂–µ –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–∞–∫–æ–π –º–æ–ª–æ–¥–æ–π –∏ —Å—Ç—Ä–æ–π–Ω–æ–π:
üí´ —Å –∫—É—á–µ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ –ª–µ–≥–∫–æ—Å—Ç—å—é –≤ —Ç–µ–ª–µ
üí´ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ–∑ –æ—Ç—ë–∫–æ–≤ –∏ –∑–∞–∂–∏–º–æ–≤
üí´–≤ –ø–æ–¥—Ç—è–Ω—É—Ç–æ–º —Ç–µ–ª–µ –±–µ–∑ –≤—ã–ø–∏—Ä–∞—é—â–µ–≥–æ –∂–∏–≤–æ—Ç–∞, —Å–æ —Å—Ç—Ä–æ–π–Ω–æ–π —Ç–∞–ª–∏–µ–π
üí´ —Å –ø–æ–¥—Ç—è–Ω—É—Ç—ã–º –ª–∏—Ü–æ–º –±–µ–∑ –º–æ—Ä—â–∏–Ω –∏ –±—Ä—ã–ª–µ–π

–ò –ø—Ä–∏–π—Ç–∏ –∫ —Ç–∞–∫–æ–º—É —Ä–µ–∞–ª—å–Ω–æ –ª—é–±–æ–π:
‚Äî –¥–µ–ª–æ –ù–ï –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ –∏–ª–∏ –≥–µ–Ω–µ—Ç–∏–∫–µ,
‚Äî –Ω–µ –Ω—É–∂–Ω–æ —Å–∏–¥–µ—Ç—å –Ω–∞ –¥–∏–µ—Ç–∞—Ö, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Å–µ–±—è –∏ —É–±–∏–≤–∞—Ç—å—Å—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö

<b>–Ø –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∞—Å—å, –∫–∞–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–π–¥–µ—Ç —Ç–µ–±–µ, –Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª https://t.me/elan_beauty </b> üëáüèª"""

    markup = types.InlineKeyboardMarkup()
    btn_subscribe = types.InlineKeyboardButton(
        text="–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª",
        url="https://t.me/elan_beauty"
    )
    btn_check = types.InlineKeyboardButton(
        text="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É",
        callback_data="check_subscription"
    )
    markup.add(btn_subscribe, btn_check)

    bot.send_message(message.chat.id, thanks_text, reply_markup=markup, parse_mode='HTML')


@bot.callback_query_handler(func=lambda call: call.data == "check_subscription")
def check_subscription_callback(call):
    try:
        chat_member = bot.get_chat_member(chat_id="@elan_beauty", user_id=call.from_user.id)
        if chat_member.status in ['member', 'administrator', 'creator']:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å–∞–Ω
            bot.answer_callback_query(call.id, "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É! –°–µ–π—á–∞—Å –ø–æ–¥–±–µ—Ä—É –¥–ª—è —Ç–µ–±—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É...")
            send_training(call.message.chat.id)
        else:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω
            bot.answer_callback_query(call.id, "‚ùå –ö–∞–∂–µ—Ç—Å—è, —Ç—ã –µ—â–µ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–ª–∞—Å—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–ø–∏—à–∏—Å—å –∏ –Ω–∞–∂–º–∏ —Å–Ω–æ–≤–∞", show_alert=True)
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏: {e}")
        bot.answer_callback_query(call.id, "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –ø–æ–∑–∂–µ", show_alert=True)


def send_training(chat_id):
    user = user_data.get(chat_id, {})
    concern = user.get('concern', '')

    markup = types.InlineKeyboardMarkup()

    if concern == '–°—É—Ç—É–ª–æ—Å—Ç—å, –Ω–µ–∫—Ä–∞—Å–∏–≤–∞—è –æ—Å–∞–Ω–∫–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±–æ–ª–∏—Ç —Å–ø–∏–Ω–∞':
        training_text = """<b>–õ–æ–≤–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É ¬´–∑–¥–æ—Ä–æ–≤–∞—è —Å–ø–∏–Ω–∞¬ª, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å</b>: 
‚Ä¢–ª–µ–≥–∫–æ—Å—Ç—å
‚Ä¢–æ—Å–∞–Ω–∫–∞ –≤—ã–ø—Ä—è–º–∏—Ç—å—Å—è
‚Ä¢–±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥—ã –≤ –¥–≤–∏–∂–µ–Ω–∏—è—Ö –∏ –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏
‚Ä¢—á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ ‚Äî –º–∏–Ω—É—Å –ª–∏—à–Ω–∏–µ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä—ã –≤ —Ç–∞–ª–∏–∏ –∏ –±–æ–ª–µ–µ –ø–æ–¥—Ç—è–Ω—É—Ç—ã–π –∂–∏–≤–æ—Ç, –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è –æ—Å–∞–Ω–∫–∞ 

–í—Å–µ–≥–æ 11 –º–∏–Ω—É—Ç ‚Äî –∏ —Ç—ã —É–≤–∏–¥–∏—à—å, –∫–∞–∫ —Ç–≤–æ–µ —Ç–µ–ª–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å! –ù–∞—á–Ω—ë–º? üöÄ"""
        button = types.InlineKeyboardButton(text="–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ YouTube",
                                            url="https://youtu.be/ev23H3TBDp0?si=GylBJr1rf-stdYmP")
    else:
        training_text = """<b>–õ–æ–≤–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É ¬´—É–±–∏—Ä–∞–µ–º –≥–∏–ø–µ—Ä—Ç–æ–Ω—É—Å –∂–µ–≤–∞—Ç–µ–ª—å–Ω–æ–π –∏ –≤–∏—Å–æ—á–Ω–æ–π –º—ã—à—Ü—ã¬ª, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å</b>: 
‚Ä¢—Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ –º—ã—à—Ü –ª–∏—Ü–∞, —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å ¬´—Å–≤–æ–±–æ–¥—É¬ª –ª–∏—Ü–∞ –≤ –ø—Ä—è–º–æ–º —Å–º—ã—Å–ª–µ 
‚Ä¢–æ–≤–∞–ª –ª–∏—Ü–∞ –ø–æ–¥—Ç—è–Ω–µ—Ç—Å—è 
‚Ä¢–∑–∞–º–µ—Ç–Ω–æ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è –º–æ—Ä—â–∏–Ω—ã –∏ –±—Ä—ã–ª–∏

–í—Å–µ–≥–æ 2 –º–∏–Ω—É—Ç—ã ‚Äî –∏ —Ç—ã —É–≤–∏–¥–∏—à—å, –∫–∞–∫ —Ç–≤–æ–µ –ª–∏—Ü–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –æ–≤–∞–ª –ø–æ–¥—Ç—è–Ω—É–ª—Å—è –∏ –≤–æ–æ–±—â–µ —Ç—ã –ø–æ–º–æ–ª–æ–¥–µ–ª–∞! –ù–∞—á–Ω—ë–º? üöÄ"""
        button = types.InlineKeyboardButton(text="–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ YouTube",
                                            url="https://youtu.be/VeRg8-BpfOI?si=SLd0a-pqB5FEgWLl")

    restart_button = types.InlineKeyboardButton(text="üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç", callback_data="restart_test")
    markup.add(restart_button)
    markup.add(button)
    bot.send_message(chat_id, training_text, reply_markup=markup, parse_mode='HTML')

    # –ß–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è —Å–ø—Ä–∞—à–∏–≤–∞–µ–º, —Å–¥–µ–ª–∞–ª–∞ –ª–∏ –∫–æ–º–ø–ª–µ–∫—Å
    timer = threading.Timer(60*60, ask_if_done, args=[chat_id])  # –ß–µ—Ä–µ–∑ 1 —á–∞—Å
    timer.start()

@bot.callback_query_handler(func=lambda call: call.data == "restart_test")
def restart_test(call):
    bot.answer_callback_query(call.id, "–ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ!")
    ask_age(call.message.chat.id)

def ask_if_done(chat_id):
    name = bot.get_chat(chat_id).first_name
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
    markup.add(types.KeyboardButton("–ö–æ–Ω–µ—á–Ω–æ! üòä"))
    bot.send_message(chat_id, f"{name}, –ø–æ–¥—Å–∫–∞–∂–∏, —Å–¥–µ–ª–∞–ª–∞ –∫–æ–º–ø–ª–µ–∫—Å?", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text == "–ö–æ–Ω–µ—á–Ω–æ! üòä")
def handle_done_confirmation(message):
    follow_up_text = """–£–∂–µ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏\?

–¢–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –∑–∞ –º–µ—Å—è—Ü —Ä–∞–±–æ—Ç—ã –Ω–∞ –æ—Å–∞–Ω–∫—É –∏ –ª–∏—Ü–æ —Ç—ã —Å–º–æ–∂–µ—à—å –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞ 10 –ª–µ—Ç –º–æ–ª–æ–∂–µ\:

üå∏ —É–±–∏—Ä–∞–µ—à—å –æ—Ç—ë–∫–∏, –∞ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º–∏ ‚Äî —Ç—è–∂–µ—Å—Ç—å –∏ –ª–∏—à–Ω–∏–µ –æ–±—ä—ë–º—ã –≤ –Ω–æ–≥–∞—Ö, —Ç–∞–ª–∏–∏ –∏ –∂–∏–≤–æ—Ç–µ
üå∏ —Å–º–æ—Ç—Ä–∏—à—å –≤ –∑–µ—Ä–∫–∞–ª–æ –∏ –≤–∏–¥–∏—à—å, –∫–∞–∫ –ø–ª–µ—á–∏ —Ä–∞—Å–ø—Ä–∞–≤–∏–ª–∏—Å—å –∫–∞–∫ —É –º–æ–¥–µ–ª–∏ –∏–ª–∏ –±–∞–ª–µ—Ä–∏–Ω—ã
üå∏ —Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Å—É—Ç—É–ª–∏—à—å—Å—è, –∞ –ø–æ—Ö–æ–¥–∫–∞ —Å—Ç–∞–ª–∞ –ª—ë–≥–∫–æ–π –∏ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π
üå∏ —Ç–≤–æ–µ –ª–∏—Ü–æ —Å—Ç–∞–ª–æ –ø–æ–¥—Ç—è–Ω—É—Ç—ã–º, –º–æ—Ä—â–∏–Ω–∫–∏ –∏—Å—á–µ–∑–ª–∏ –∏ —Ç—ã —Å—Ç–∞–ª–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –º–æ–ª–æ–∂–µ
üå∏ —Ç–µ–±–µ –¥–µ–ª–∞—é—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –∏ –Ω–µ –≤–µ—Ä—è—Ç, –∫–æ–≥–¥–∞ —Ç—ã –Ω–∞–∑—ã–≤–∞–µ—à—å —Å–≤–æ–π –≤–æ–∑—Ä–∞—Å—Ç

–≠—Ç–æ –Ω–µ —Å–∫–∞–∑–∫–∞ ‚Äî —ç—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–ª—É–±–µ Elan beauty 

üî•3 –æ–Ω–ª–∞–π–Ω –≤ –Ω–µ–¥–µ–ª—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ 30 –º–∏–Ω—É—Ç 
üî•–ó–∞–Ω–∏–º–∞–π—Å—è LIVE —Å –Ω–∞–º–∏ –∏–ª–∏ –≤ –∑–∞–ø–∏—Å–∏ ‚Äî –∫–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ\:  
\- –£—Ç—Ä–æ–º —Å –∫–æ—Ñ–µ   
\- –í –æ–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤   
\- –í–µ—á–µ—Ä–æ–º –≤–º–µ—Å—Ç–æ —Å–µ—Ä–∏–∞–ª–∞  
üî• –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è 7 –º–∏–Ω—É—Ç–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–ª—è —à–µ–∏
üî• –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ 15 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–π –æ—Å–∞–Ω–∫–∏
üî• 2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –ø–∏–ª–∞—Ç–µ—Å –Ω–∞ –º—è—á–µ 
üî• –î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è –ø–ª–µ—á
üî• –£—Ä–æ–∫–∏ –ø–æ —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏—é –ª–∏—Ü–∞ –∏ —Ç–µ–ª–∞, —á—Ç–æ–±—ã –æ–º–æ–ª–∞–∂–∏–≤–∞—Ç—å—Å—è –≤–æ —Å–Ω–µ

üìå –î–æ—Å—Ç—É–ø –í–°–ï–ì–û –∑–∞ 2599 –≤–º–µ—Å—Ç–æ ~5599~"""

    # –£–±–∏—Ä–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
    markup = types.InlineKeyboardMarkup()
    btn_subscribe = types.InlineKeyboardButton(
        text="–•–æ—á—É –±–æ–ª—å—à–µ!",
        url="https://elviraelan.taplink.ws"
    )
    markup.add(btn_subscribe)

    bot.send_message(
        message.chat.id,
        follow_up_text,
        reply_markup=markup,  # –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞
        parse_mode='MarkdownV2'
    )

    threading.Timer(60*60*24, send_day_after_message, args=[message.chat.id]).start()


def send_day_after_message(chat_id):
    name = bot.get_chat(chat_id).first_name

    # –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ
    success_story = f"""–ò—Ä–∞ 39 –ª–µ—Ç 

–ü—Ä–∏—à–ª–∞ –≤ –∫–ª—É–±:
‚ùå–õ–∏—à–Ω–∏–π –≤–µ—Å 
‚ùå–û—Ç–µ—á–Ω–æ—Å—Ç—å
‚ùå–î–≤–æ–π–Ω–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫ 
‚ùå–ë–æ–ª—å –≤ —à–µ–µ
‚ùå–¶–µ–ª–ª—é–ª–∏—Ç 
‚ùå–°—É—Ç—É–ª–æ—Å—Ç—å 

–ü–æ—Å–ª–µ: 
‚úÖ–£–±—Ä–∞–ª–∏ –æ—Ç–µ–∫–∏ 
‚úÖ–õ–∏—à–Ω–∏–π –≤–µ—Å –ø–æ—à–µ–ª –≤–Ω–∏–∑ 
‚úÖ–£–ª—É—á—à–∏–ª–∞—Å—å –æ—Å–∞–Ω–∫–∞
‚úÖ–£—à–ª–∞ –æ—Ç–µ—á–Ω–æ—Å—Ç—å –ª–∏—Ü–∞ 
‚úÖ–†–∞—Å–∫—Ä—ã–ª–∞ —Å–µ–±—è –∫–∞–∫ –∂–µ–Ω—â–∏–Ω–∞ 
‚úÖ–ù–∞—É—á–∏–ª–∞—Å—å –Ω—Ä–∞–≤–∏—Ç—Å—è —Å–µ–±–µ"""

    media = [
        types.InputMediaVideo('BAACAgIAAxkDAAOLaEmZ12Y-n6di3SZCnm_hM2yH4fgAAn5yAALgMVBK6JHVUCwaVD02BA',
                              caption=success_story),
        types.InputMediaPhoto('AgACAgIAAxkDAAONaEmaWvnG0QP0CmvucYALAy0leDsAAgT5MRun7FBKsX9XfNJoAAHeAQADAgADeQADNgQ')
    ]

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞–≥—Ä—É–ø–ø—É
    bot.send_media_group(chat_id, media)

    # –ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    threading.Timer(15*60, send_follow_up_message, args=[chat_id]).start()


def send_follow_up_message(chat_id):
    name = bot.get_chat(chat_id).first_name

    follow_up_text = f"""{name}, —Ç—ã —Ç–∞–∫ –ø–æ–º–æ–ª–æ–¥–µ–ª–∞ –∏ –ø–æ—Å—Ç—Ä–æ–π–Ω–µ–ª–∞ üî•

–•–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å —Ç–∞–∫–∏–µ –∂–µ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã?

–≠—Ç–æ —Å–µ–∫—Ä–µ—Ç —Ä–∞–±–æ—Ç—ã —Å –æ—Å–∞–Ω–∫–æ–π –∏ –æ—Ç–µ–∫–∞–º–∏, —Å –º—ã—à—Ü–∞–º–∏ –ª–∏—Ü–∞
–∞ –Ω–µ –¥–∏–µ—Ç –∏ –∂–µ—Å—Ç–∫–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, –ø–æ—Ö–æ–¥–æ–≤ –∫ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥—É 

–£ –¥–µ–≤—É—à–µ–∫ –ø–æ–¥—Ç—è–Ω—É–ª—Å—è –æ–≤–∞–ª –ª–∏—Ü–∞, –≤–µ—Å –ø–æ—à–µ–ª –≤–Ω–∏–∑, —É—à–µ–ª –≤—Ç–æ—Ä–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫ 

–ü—Ä–∏ —ç—Ç–æ–º –æ–Ω–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ –ª–∞–π—Ç–µ:
- 3-4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –¥–æ–º–∞
- –¥–µ–ª–∞–ª–∏ 15-30 –º–∏–Ω—É—Ç–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã –∏ –æ–º–æ–ª–∞–∂–∏–≤–∞–ª–∏—Å—å –¥–∞–∂–µ –Ω–æ—á—å—é 

üèÜ –ò—Ç–æ–≥: —É—à–ª–∏ –æ—Ç–µ–∫–∏, –ø–æ–¥—Ç—è–Ω—É–ª—Å—è –∂–∏–≤–æ—Ç, —É—à–µ–ª –≤—Ç–æ—Ä–æ–π –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫, –æ—Å–∞–Ω–∫–∞ —Å—Ç–∞–ª–∞ –ö–û–†–û–õ–ï–í–°–ö–û–ô

–ê —Ç—ã –≥–æ—Ç–æ–≤–∞ –∫ —Ç–∞–∫–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º?"""

    media = [
        types.InputMediaPhoto(open('media/results1.jpg', 'rb'), caption=follow_up_text),
        types.InputMediaPhoto(open('media/results2.jpg', 'rb'))
    ]

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞–≥—Ä—É–ø–ø—É
    bot.send_media_group(chat_id, media)

    markup = types.InlineKeyboardMarkup()
    btn_join = types.InlineKeyboardButton(
        text="–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–ª—É–±—É!",
        url="https://elviraelan.taplink.ws"
    )
    markup.add(btn_join)

    bot.send_message(chat_id, "üëâüèª –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –∫–ª—É–±—É <b>¬´Elan beauty¬ª</b> –∏ –ø–æ—á—É–≤—Å—Ç–≤—É–π —ç—Ç–æ—Ç –∫–∞–π—Ñ –Ω–∞ —Å–µ–±–µ!", parse_mode='HTML', reply_markup=markup)
    # –ß–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    threading.Timer(3*60, send_final_pitch, args=[chat_id]).start()


def send_final_pitch(chat_id):
    name = bot.get_chat(chat_id).first_name

    final_text = f"""{name}, —Ç—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –∑–∞–¥—É–º—ã–≤–∞–ª–∞—Å—å, –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç —Ç–≤–æ–∏ –¥–µ–Ω—å–≥–∏?

<b><i>–ö–∞–∂–¥—ã–π –ø–æ—Ö–æ–¥ –≤ –º–∞–≥–∞–∑–∏–Ω ‚Äî 1500‚Äì3000 —Ä—É–±–ª–µ–π –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ...</i></b>

üçü –¥–æ–±–∞–≤–ª—è—é—Ç –ª–∏—à–Ω–∏–µ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä—ã –∏ –∫–≥
üçü —Å–æ–∑–¥–∞—é—Ç –æ—â—É—â–µ–Ω–∏–µ —Ç—è–∂–µ—Å—Ç–∏
üçü –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ç–≤–æ–µ–º –ª–∏—Ü–µ –Ω–µ –≤ –ª—É—á—à—É—é —Å—Ç–æ—Ä–æ–Ω—É

<b>–ê —Ç–µ–ø–µ—Ä—å —Å—Ä–∞–≤–Ω–∏: 2599‚ÇΩ ‚Äî —Å—Ç–æ–ª—å–∫–æ –∂–µ –∏ –±–æ–ª—å—à–µ —Ç—ã —Ç—Ä–∞—Ç–∏—à—å –Ω–∞ –µ–¥—É –∑–∞ –Ω–µ–¥–µ–ª—é.</b> –¢–∞–∫ –≤–µ–¥—å?

<b>–ê –∑–∞ —ç—Ç—É –∂–µ —Å—É–º–º—É —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å:</b>
üí™üèª –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¥–ª—è –æ—Å–∞–Ω–∫–∏, –ø–æ–¥—Ç—è–Ω—É—Ç–æ–≥–æ –æ–≤–∞–ª–∞ –ª–∏—Ü–∞, —Å—Ç—Ä–æ–π–Ω–æ–≥–æ —Ç–µ–ª–∞ –∏ –°–ê–ú–û–ï –ì–õ–ê–í–ù–û–ï - –º–æ–ª–æ–¥–æ—Å—Ç–∏
ü§ó –£—Ä–æ–∫–∏ —Ç–µ–π–ø–∏—Ä–æ–≤–∞–Ω–∏—é
üî• –°–æ–≤–µ—Ç—ã –ø–æ –ø–∏—Ç–∞–Ω–∏—é

2599‚ÇΩ ‚Äî —ç—Ç–æ –≤–∫–ª–∞–¥ –≤ —Å—Ç—Ä–æ–π–Ω–æ–µ —Ç–µ–ª–æ –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ

üëâüèª <b>–†–∞–∑–≤–µ —ç—Ç–æ –Ω–µ —Å–∞–º–∞—è –≤—ã–≥–æ–¥–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –≤ —Å–µ–±—è –∏ —Å–≤–æ–µ —Ç–µ–ª–æ?</b>"""

    markup = types.InlineKeyboardMarkup()
    btn_join = types.InlineKeyboardButton(
        text="–£–±–µ–¥–∏–ª–∞, –∏–¥—É!",
        url="https://elviraelan.taplink.ws"
    )
    markup.add(btn_join)

    bot.send_message(chat_id, final_text, reply_markup=markup, parse_mode='HTML')

if __name__ == '__main__':
    bot.polling(none_stop=True)